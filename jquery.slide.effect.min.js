(function($){$.fn.slideEffect=function(g,h,j){var j=jQuery.extend({height:600},j);var k;var x=0;var X;var l=0;var m=0;var n=0;var o;var p;var q;var r;var s;var v=0;var t=[];var u=[];var w={resetPos:function(a){p.css('left',a-width);q.css('left',a);r.css('left',a+width)},slideLeft:function(){k+=1;if(k>=h)k-=h;var a=(k+1);if(a>=h)a-=h;var b=(k-1)if(b<0)b+=parseInt(h);p.html(q.html());q.html(r.html());u['l']=b;u['c']=k;u['r']=a;w.getPage(t,a,h)},slideRight:function(){k-=1;if(k<0)k+=h;var a=k-1;if(a<0)a+=h;var b=k+1;if(b>=h)b-=h;r.html(q.html());q.html(p.html());u['l']=a;u['c']=k;u['r']=b;w.getPage(t,a,h)},getPage:function(b,c,d){var e=parseInt(c);var f;if(u['l']==e)f=p;if(u['c']==e)f=q;if(u['r']==e)f=r;if(e<0){e-=-d}else if(e>=d)e-=parseInt(d);if(!(e in b)){At=e;f.html('Загрузка страницы...');$.ajax({url:g,data:{p:e},dataType:"script",success:function(a){b[e]=a;if(a['l']==c)f=p;if(a['c']==c)f=q;if(a['r']==c)f=r;f.html(a)}})}else{f.html(b[e])}},mouseup:function(){if(l==1){l=0;dir=0;if(v>3){dir=1}else if(v<-3){dir=-1}else{if(m>width*0.5){dir=1}else if(m<-width*0.5){dir=-1}}p1=-parseInt(q.css('left'));delta=p1+Number(dir*width);w.resetPos(-delta);p.stop().animate({"left":"+="+delta},400);q.stop().animate({"left":"+="+delta},400);r.stop().animate({"left":"+="+delta},400);if(dir==1){w.slideRight()}else if(dir==-1){w.slideLeft()}if(h!=1){dotline="";for(i=0;i<k;i++){dotline+='.'}dotline+='<span style="color:#fff;font-size:34pt">.</span>';for(i=k+1;i<h;i++){dotline+='.'}$('#paginator').html(dotline)}}}}this.each(function(){k=0;t=[];$(this).addClass('ui-slide-effect');$(this).append('<div id="left" class="page" unselectable="on"></div>');$(this).append('<div id="center" class="page" unselectable="on"></div>');$(this).append('<div id="right" class="page" unselectable="on"></div>');$(this).append('<div id="paginator"unselectable="on"></div>');p=$('#left');q=$('#center');r=$('#right');s=$('#paginator');$(this).css('height',parseInt(j.height));s.css('top',parseInt(j.height-50));width=$(this).width();p.css('left',-width).css('width',width);q.css('left',0).css('width',width);r.css('left',width).css('width',width);u['l']=k-1;u['c']=k;u['r']=k+1;w.getPage(t,k,h);w.getPage(t,k-1,h);w.getPage(t,k+1,h);if(h!=1){dotline="";for(i=0;i<k;i++){dotline+='.'}dotline+='<span>.</span>';for(i=k+1;i<h;i++){dotline+='.'}$('#paginator').html(dotline)}$(this).bind("mouseup",w.mouseup);$(this).bind("mouseleave",w.mouseup);$(this).bind("mousedown",function(e){x=e.clientX;p.stop();q.stop();r.stop();X=x;o=parseInt(q.css('left'));m=o+x-X;n=m;l=1});$(this).bind('mousemove',function(e){x=e.clientX;n=m;m=o+x-X;v=m-n;if(l==1){p.css('left',m-width);q.css('left',m);r.css('left',m+width)}})});return this}})(jQuery);